(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(67)},29:function(e,t,n){},31:function(e,t,n){},64:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(23),r=n.n(o),c=(n(29),n(9)),i=n(10),u=n(12),l=n(11),h=n(13),m=(n(31),n(14)),p=function(e){var t=e.question,n=e.sub,a=e.onVote;return s.a.createElement("div",null,s.a.createElement("h1",{className:"splash-head"},t),s.a.createElement("p",{className:"splash-subhead"},n||""),s.a.createElement("p",null,s.a.createElement("button",{onClick:function(){return a(1)},className:"pure-button pure-button-primary"},"Yes"),s.a.createElement("button",{onClick:function(){return a(-1)},className:"pure-button pure-button-primary"},"No")))},d=n(15).DateTime,v=function(e){var t=e.reduce(function(e,t){var n=d.fromISO(t.date).toFormat("yyyyMMdd");return e[t.question]=e[t.question]||{},e[t.question][n]=e[t.question][n]||{result:0,count:0},e[t.question][n].result=(e[t.question][n].result||0)+t.rating,e[t.question][n].count++,e},{}),n=Object.keys(t).reduce(function(e,n,a){return Object.keys(t[n]).forEach(function(a,s){e["Iteration ".concat(s)]=e["Iteration ".concat(s)]||{data:[]},e["Iteration ".concat(s)].data.push({x:n,y:t[n][a].result/t[n][a].count})}),e},{});return Object.keys(n).map(function(e){return Object(m.a)({},n[e],{series:e})})},f=n(4),E=(n(64),function(e){var t=e.data;return s.a.createElement(f.Chart,{data:t},s.a.createElement(f.Axis,{primary:!0,type:"ordinal"}),s.a.createElement(f.Axis,{type:"linear",min:-1,max:1}),s.a.createElement(f.Series,{type:f.Line}),s.a.createElement(f.Tooltip,null),s.a.createElement(f.Cursor,null))}),y=n(15).DateTime,b=function(e){var t=e.question,n=e.votes,a=y.local(),o=0,r=0,c=v(n);return n.reduce(function(e,t){return a.hasSame(y.fromISO(t.date),"day")?(t.rating>0?o++:r++,e+t.rating):e},0),s.a.createElement("div",null,s.a.createElement("p",{className:"splash-subhead"},t,s.a.createElement("div",{style:{fontSize:"small"}},"Up ",o," | Down ",r)),s.a.createElement("h1",{className:"splash-head"},s.a.createElement("div",{style:{fontSize:"small"}},"Results"),s.a.createElement("div",{style:{height:600,position:"relative"}},s.a.createElement(E,{data:c}))))};var g=function(){var e={},t=window.location.hash;return!t||t.length<1?e:t.substring(1).split("&").reduce(function(e,t){var n=t.split("=");return 1===n.length?e[n[0]]=!0:2===n.length&&(e[n[0]]=n[1]),e},e)}();n(15).DateTime;function j(e){if(e.status>=200&&e.status<300)return e;var t=new Error("HTTP Error ".concat(e.statusText));throw t.status=e.statusText,t.response=e,console.log(t),t}function O(e){return e.json()}var w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={name:g.survey||"example",startDate:"",questions:[],question:"",hasVoted:g.voted||!1,votes:[]},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;(e=this.state.name,fetch("/api/".concat(e),{headers:{Accept:"application/json"}}).then(j).then(O)).then(function(e){t.setState(Object(m.a)({},e.survey))}),function(e){return fetch("/api/".concat(e,"/question/now"),{headers:{Accept:"application/json"}}).then(j).then(O)}(this.state.name).then(function(e){t.setState({question:e.question})}),this.state.hasVoted&&function(e){return fetch("/api/".concat(e,"/votes"),{headers:{Accept:"application/json"}}).then(j).then(O)}(this.state.name).then(function(e){var n=e.votes;t.setState({votes:n})})}},{key:"onVote",value:function(e){var t=this;(function(e){var t=e.name,n=e.date,a=e.rating,s=g.voteId;return fetch("/api/".concat(t,"/votes"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","x-vote-id":s},body:JSON.stringify({date:n,rating:a})}).then(j).then(O)})({name:this.state.name,date:new Date,rating:e}).then(function(e){return t.setState({hasVoted:!0,votes:e.votes})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.questions.length<1?s.a.createElement("h1",{className:"splash-head"},"loading..."):this.state.hasVoted?s.a.createElement(b,this.state):s.a.createElement(p,Object.assign({},this.state,{onVote:function(t){return e.onVote(t)}}));return s.a.createElement("div",{className:"splash-container"},s.a.createElement("div",{className:"splash"},t))}}]),t}(a.Component),N=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=g.survey?s.a.createElement(w,null):s.a.createElement("div",{className:"splash-container"},s.a.createElement("div",{className:"splash"},s.a.createElement("h1",{className:"splash-head"},"Welcome! Please open your voting directly to continue.")));return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"header"},s.a.createElement("div",{className:"home-menu pure-menu pure-menu-horizontal pure-menu-fixed"},s.a.createElement("a",{className:"pure-menu-heading",href:"/"},"Daily Question"))),e)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,2,1]]]);
//# sourceMappingURL=main.0e87a446.chunk.js.map